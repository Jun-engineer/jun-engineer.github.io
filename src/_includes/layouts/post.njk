---
layout: layouts/base.njk
---
{% set langValue = lang | default('en') %}
{% set isEnglish = langValue == 'en' %}
{% set homeHref = '/index.html' %}
{% set contactHref = '/index.html#contact' %}
{% if isEnglish %}
  {% set portfolioHref = '/en/portfolio/' %}
  {% set blogHref = '/en/blog/' %}
  {% set languageLabel = 'Language' %}
  {% set languageOther = 'JA' %}
  {% set languageOtherHref = '/ja/blog/' %}
  {% set publishedLabel = 'Published' %}
  {% set readingLabel = 'Reading time' %}
  {% set tagsLabel = 'Tags' %}
  {% set categoryLabel = 'Category' %}
  {% set backToBlog = 'Back to blog' %}
  {% set discussionTitle = 'Need a hand with your platform?' %}
  {% set discussionBody = 'Share the context behind your next migration, incident, or automation initiative. I love turning real-world constraints into reusable playbooks.' %}
  {% set discussCtaPrimary = 'Start a conversation' %}
  {% set discussCtaSecondary = 'View portfolio' %}
  {% set dateFormat = 'MMM d, yyyy' %}
{% else %}
  {% set portfolioHref = '/ja/portfolio/' %}
  {% set blogHref = '/ja/blog/' %}
  {% set languageLabel = '言語' %}
  {% set languageOther = 'EN' %}
  {% set languageOtherHref = '/en/blog/' %}
  {% set publishedLabel = '公開日' %}
  {% set readingLabel = '読了目安' %}
  {% set tagsLabel = 'タグ' %}
  {% set categoryLabel = 'カテゴリ' %}
  {% set backToBlog = 'ブログ一覧へ戻る' %}
  {% set discussionTitle = 'プラットフォーム設計でお困りですか？' %}
  {% set discussionBody = '次の移行計画やインシデント対応、オートメーション施策について背景をお聞かせください。実践的なプレイブックとして再構成するお手伝いをします。' %}
  {% set discussCtaPrimary = '相談してみる' %}
  {% set discussCtaSecondary = 'ポートフォリオを見る' %}
  {% set dateFormat = 'yyyy年MM月dd日' %}
{% endif %}
{% if isEnglish %}
  {% set languageCurrent = 'EN' %}
{% else %}
  {% set languageCurrent = 'JA' %}
{% endif %}
{% set formattedDate = page.date | date(dateFormat) %}
<header class="site-header">
  <div class="container nav-shell">
    <a class="brand-mark" href="{{ homeHref }}">{% if isEnglish %}Jun Nammoku{% else %}南木 潤{% endif %}</a>
    <nav class="nav-group" aria-label="Primary">
      <button class="nav-toggle" type="button" data-nav-toggle aria-expanded="false" aria-controls="post-navigation">
        <span class="nav-toggle-label">{% if isEnglish %}Menu{% else %}メニュー{% endif %}</span>
        <i class="fa-solid fa-bars" aria-hidden="true"></i>
      </button>
      <div class="nav-links" id="post-navigation" data-nav-menu>
        <a href="{{ homeHref }}">{% if isEnglish %}Home{% else %}ホーム{% endif %}</a>
        <a href="{{ portfolioHref }}">{% if isEnglish %}Portfolio{% else %}ポートフォリオ{% endif %}</a>
        <a href="{{ blogHref }}" aria-current="page">{% if isEnglish %}Blog{% else %}ブログ{% endif %}</a>
        <a href="{{ contactHref }}">{% if isEnglish %}Contact{% else %}お問い合わせ{% endif %}</a>
        <div class="nav-language" aria-label="{{ languageLabel }}">
          <span class="nav-language-label">{{ languageLabel }}</span>
          <div class="nav-language-options">
            <a class="nav-language-link{% if isEnglish %} is-active{% endif %}" href="{{ blogHref }}"{% if isEnglish %} aria-current="page"{% endif %}>{{ languageCurrent }}</a>
            <a class="nav-language-link{% if not isEnglish %} is-active{% endif %}" href="{{ languageOtherHref }}"{% if not isEnglish %} aria-current="page"{% endif %}>{{ languageOther }}</a>
          </div>
        </div>
      </div>
    </nav>
  </div>
</header>

<main>
  <section class="article-hero" id="article-hero">
    <div class="container article-hero-grid">
      <div class="article-hero-copy">
        <a class="article-breadcrumb" href="{{ blogHref }}">
          <i class="fa-solid fa-arrow-left" aria-hidden="true"></i>
          <span>{{ backToBlog }}</span>
        </a>
        <p class="eyebrow">{% if isEnglish %}Tech Blog{% else %}テックブログ{% endif %}</p>
        <h1 class="article-title">{{ title }}</h1>
        {% if description %}
          <p class="article-subtitle">{{ description }}</p>
        {% endif %}
        <div class="article-meta">
          <span class="meta-chip">
            <i class="fa-solid fa-folder-tree" aria-hidden="true"></i>
            {{ categoryLabel }}: {{ category | default('General') }}
          </span>
          <span class="meta-chip">
            <i class="fa-solid fa-calendar-days" aria-hidden="true"></i>
            {{ publishedLabel }}: {{ formattedDate }}
          </span>
          {% if duration %}
            <span class="meta-chip">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              {{ readingLabel }}: {{ duration }}
            </span>
          {% endif %}
        </div>
        {% if tags and tags.length %}
          <ul class="article-tags" role="list">
            {% for tag in tags %}
              {% if tag not in ['post', 'posts'] %}
                <li><span class="tag-pill">{{ tag }}</span></li>
              {% endif %}
            {% endfor %}
          </ul>
        {% endif %}
      </div>
      <div class="article-summary-card">
        <div class="summary-card">
          <h2>{% if isEnglish %}In this article{% else %}この記事でわかること{% endif %}</h2>
          <ul>
            <li>{% if isEnglish %}Practical blueprint for blue/green deployments{% else %}ブルーグリーンデプロイの実践手順{% endif %}</li>
            <li>{% if isEnglish %}Guardrails, observability, and rollback patterns{% else %}ガードレール・観測基盤・ロールバックの設計{% endif %}</li>
            <li>{% if isEnglish %}Key metrics and lessons after four sprints{% else %}導入4スプリント後の指標と学び{% endif %}</li>
          </ul>
        </div>
        <div class="summary-card">
          <h2>{{ discussionTitle }}</h2>
          <p>{{ discussionBody }}</p>
          <div class="summary-actions">
            <a class="cta-button primary" href="mailto:jun.nammoku@gmail.com">{{ discussCtaPrimary }}</a>
            <a class="cta-button ghost" href="{{ portfolioHref }}">{{ discussCtaSecondary }}</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="article-body" id="content">
    <div class="container article-layout">
      <article class="article-content">
        {{ content | safe }}
      </article>
      <aside class="article-aside" aria-label="{% if isEnglish %}Article resources{% else %}付属情報{% endif %}">
        <div class="aside-card">
          <h3>{% if isEnglish %}Quick facts{% else %}要点まとめ{% endif %}</h3>
          <ul>
            <li><strong>{{ categoryLabel }}:</strong> {{ category | default('General') }}</li>
            <li><strong>{{ publishedLabel }}:</strong> {{ formattedDate }}</li>
            {% if duration %}<li><strong>{{ readingLabel }}:</strong> {{ duration }}</li>{% endif %}
            {% if tags and tags.length %}<li><strong>{{ tagsLabel }}:</strong> {{ tags | join(', ') }}</li>{% endif %}
          </ul>
        </div>
        <div class="aside-card">
          <h3>{% if isEnglish %}Share feedback{% else %}フィードバック{% endif %}</h3>
          <p>{% if isEnglish %}Have a similar challenge or spot an improvement? Drop me a note and we can iterate together.{% else %}似た課題や改善案があればぜひお知らせください。次の記事に反映していきます。{% endif %}</p>
          <a class="cta-button ghost" href="{{ contactHref }}">{% if isEnglish %}Contact me{% else %}問い合わせる{% endif %}</a>
        </div>
      </aside>
    </div>
  </section>

  <section class="article-footer-cta">
    <div class="container article-footer-card">
      <div>
        <h2>{% if isEnglish %}Ready to modernize your platform?{% else %}プラットフォームのモダナイズを進めませんか？{% endif %}</h2>
        <p>{% if isEnglish %}From deployment pipelines to observability rollouts, I help teams ship with confidence. Let’s design the next experiment together.{% else %}デプロイパイプラインから観測性の構築まで、自信を持ってリリースできるよう伴走します。次の実験を一緒に設計しましょう。{% endif %}</p>
      </div>
      <div class="article-footer-actions">
        <a class="cta-button primary" href="mailto:jun.nammoku@gmail.com">{% if isEnglish %}Book a session{% else %}相談を申し込む{% endif %}</a>
        <a class="cta-button ghost" href="{{ blogHref }}">{{ backToBlog }}</a>
      </div>
    </div>
  </section>
</main>
```}